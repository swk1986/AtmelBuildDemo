image: ubuntu:22.04

definitions:
  steps:
    - step: &demo-job
        name: a simple demo case for builing project in docker
        script:
          - dpkg-divert --local --rename --add /sbin/initctl
          - ln -sf /bin/true /sbin/initctl
          - ENV DEBIAN_FRONTEND noninteractive
          - dpkg --add-architecture i386 
          - apt-get update 
          - apt-get -y install gcc-avr binutils-avr avr-libc gdb-avr avrdude  make git  sudo curl tree nano lrzsz
          - cd ./src/Doku_Test
          - make hex
pipelines:
  custom:
    start-demo-job:
      - step: *demo-job